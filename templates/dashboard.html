<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MoodTube</title>
    <link rel="stylesheet" href="/static/css/global.css" />
    <link rel="stylesheet" href="/static/css/dashboard.css" />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      src="https://kit.fontawesome.com/3d8df9be04.js"
      crossorigin="anonymous"
    ></script>

    <!-- Script for download as pdf -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  </head>
  <body>
    <div id="pdf-content" class="container">
      <div class="navbar">
        <div class="navbar-a">
          <a href="/search">
            <img src="/static/assets/img/logo.png" alt="" />
          </a>
        </div>
        <div class="navbar-b">
          <!-- <img src="/static/assets/img/profile.jpg" alt="" /> -->
          <div class="dropdown">
            <a href="/history">History</a>
          </div>
        </div>
      </div>

      <div class="hero">
        <div class="section-a shadow">
          <div class="sa-a">
            <img
              id="p_id"
              src="{{ video_result.profileImage }}"
              alt="Profile Picture"
            />
          </div>
          <div class="sa-b">
            <p class="font-xxxl" id="channel-name">
              {{ video_result.channel_name }}
            </p>
            <p class="font-xxl" id="total_sub">
              {{ video_result.total_subscriber }}
            </p>
          </div>
        </div>

        <div class="section-b shadow">
          <p class="font-xxl" id="video-title">
            {{ video_result.video_title }}
          </p>
        </div>

        <div class="section-h shadow">
          <p class="font-xxl" class="sh-heading">Recent Five Comments</p>
          <p class="font-xl" id="comment-1">
            <i class="fa-solid fa-arrow-right"></i> {{ video_result.rComment1 }}
          </p>
          <p class="font-xl" id="comment-2">
            <i class="fa-solid fa-arrow-right"></i> {{ video_result.rComment2 }}
          </p>
          <p class="font-xl" id="comment-3">
            <i class="fa-solid fa-arrow-right"></i> {{ video_result.rComment3 }}
          </p>
          <p class="font-xl" id="comment-4">
            <i class="fa-solid fa-arrow-right"></i> {{ video_result.rComment4 }}
          </p>
          <p class="font-xl" id="comment-5">
            <i class="fa-solid fa-arrow-right"></i> {{ video_result.rComment5 }}
          </p>
        </div>

        <div class="section-c">
          <div class="sc-a shadow">
            <img
              id="bar-chart"
              src="/static/assets/chart_img/{{ video_result.pi_chart }}"
              alt="Bar Chart"
            />
          </div>
          <div class="sc-b shadow">
            <img
              id="pie-chart"
              src="/static/assets/chart_img/{{ video_result.bar_chart }}"
              alt="Pie Chart"
            />
          </div>
        </div>

        <div class="section-d shadow">
          <p class="font-xxl">
            Total Comments:
            <span id="total-comments">{{ video_result.total_comments }}</span>
          </p>
        </div>

        <div class="section-d shadow">
          <p class="font-xxl">
            Overall Sentiment:
            <span class="font-highlight" id="overall-sentiment"
              >{{ video_result.overall_sentiment }}</span
            >
          </p>
        </div>

        <div class="section-f shadow">
          <p class="font-xxl">
            Most Positive Comment:
            <i class="fa-solid fa-arrow-right"></i>
            <span id="most-positive-comment" class="font-xl font-positive"
              >{{ video_result.positive_comments }}</span
            >
          </p>
        </div>

        <div class="section-g shadow">
          <p class="font-xxl">
            Most Negative Comment:
            <i class="fa-solid fa-arrow-right"></i>
            <span id="most-negative-comment" class="font-xl font-negative"
              >{{ video_result.negative_comments }}</span
            >
          </p>
        </div>

        <div class="section-i">
          <a href="/logout"><button class="logout">Logout</button></a>
          <button
            class="logout"
            onclick="downloadPDF( {{video_result.search_id}})"
          >
            Download
          </button>
        </div>
      </div>
    </div>

    <script>
      function downloadPDF(videoId) {
        if (videoId) {
          const downloadUrl = `/download_pdf/${videoId}`;
          window.location.href = downloadUrl; // Redirect to the download route
        } else {
          alert("Video ID is missing. Cannot download the report.");
        }
      }
    </script>
  </body>
</html>
